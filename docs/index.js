const t=await(await fetch("./cgol.wasm")).arrayBuffer(),{instance:e}=await WebAssembly.instantiate(t,{}),a=e.exports,i=document.getElementById("canvas"),n=i.getContext("2d"),h=document.createElement("canvas"),d=h.getContext("2d");let g=d.createImageData(h.width,h.height);function s(){i.width=window.innerWidth,i.height=window.innerHeight,n.imageSmoothingEnabled=!1,a.init_state(i.width,i.height,1e5*Math.random()),h.width=a.get_state_width(),h.height=a.get_state_height(),g=d.createImageData(h.width,h.height)}window.addEventListener("resize",s),s();const w=()=>{a.update_state();const t=new Uint8ClampedArray(a.memory.buffer,a.get_state_data(),h.width*h.height*4);g.data.set(t),d.putImageData(g,0,0),n.drawImage(h,0,0,i.width,i.height),requestAnimationFrame(w)};w();